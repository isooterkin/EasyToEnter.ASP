@model EasyToEnter.ASP.ViewsModels.Applicant.VariabilitySelectionContainerViewModel;
@using EasyToEnter.ASP.ViewsModels.Components;

@{
    ViewData["Title"] = "Вырианты обучения";
}

@*Путь начало*@
<div class="container bg-light rounded-3 shadow mb-3">
    <div class="row">
        <div class="col px-3">
            <p class="my-1">
                <small class="text-muted">
                    <a class="link-secondary" href="/Applicant/LevelSelection">@Model.LevelName</a> / 
                    <a class="link-secondary" href="/Applicant/ScienceSelection?level=@Model.LevelId">@Model.ScienceName</a> /
                    <a class="link-secondary" href="/Applicant/GroupSelection?level=@Model.LevelId&science=@Model.ScienceId">@Model.GroupName</a> / 
                    <a class="link-secondary" href="/Applicant/DirectionSelection?level=@Model.LevelId&group=@Model.GroupId">@Model.DirectionName</a> / 
                    <a class="link-secondary" href="/Applicant/FocusSelection?level=@Model.LevelId&direction=@Model.DirectionId">@Model.FocusName</a> / ...
                </small>
            </p>
        </div>
    </div>
</div>
@*Путь конец*@

<!-- Фильтры -->
<form method="get">
    <div class="container">
        <div class="row">
            <input type="hidden" name="levelFocus" asp-for="LevelFocusId"/>
            
            <h4>Поиск вариативности</h4>
            <vc:select data='@new SelectViewModel("form", "Форма обучания", Model.FormSelectListItem)'/>
            <vc:select data='@new SelectViewModel("format", "Формат обучания", Model.FormatSelectListItem)'/>
            <vc:select data='@new SelectViewModel("payment", "Оплата обучания", Model.PaymentSelectListItem)'/>
            @*<vc:select data='@new SelectViewModel("tuition", "Стоимость обучения", Model.PaymentSelectListItem)'/>*@
            @*<vc:select data='@new SelectViewModel("passingGrade", "Проходной балл", Model.PaymentSelectListItem)'/>*@
            <vc:select data='@new SelectViewModel("entranceExams", "Вступительные экзамены", Model.EntranceExamsSelectListItem)'/>
            
            <h4 class="mt-3">Поиск вуза</h4>
            <vc:select data='@new SelectViewModel("accreditation", "Аккредитация", Model.AccreditationSelectListItem)'/>
            <vc:select data='@new SelectViewModel("militaryDepartment", "Военная кафедра", Model.MilitaryDepartmentSelectListItem)'/>
            @*<vc:select data='@new SelectViewModel("dormitory", "Общежитие", Model.MilitaryDepartmentSelectListItem)'/>*@
            @*<vc:select data='@new SelectViewModel("specializationUniversity", "Специализация", Model.MilitaryDepartmentSelectListItem)'/>*@
            @*<vc:select data='@new SelectViewModel("region", "Район", Model.MilitaryDepartmentSelectListItem)'/>*@
            @*<vc:select data='@new SelectViewModel("city", "Город", Model.MilitaryDepartmentSelectListItem)'/>*@
        </div>
    </div>
</form>

<vc:variability-container data="@Model"/>

<!-- Отправка формы при клике на select-->
@section Scripts 
{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $('.select_send_ajax').on('change', function() 
        {
            $(this.form).submit();
        });
    </script>
}